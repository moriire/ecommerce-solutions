import{g as _,I as f,a as r,c,b as s,F as m,j as g,t as I,n as y,k as w,D as h,p as b,l as D,z as U,E as $,o as k,q as x,e as F}from"./index-BKNTjOOu.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S=n=>(b("data-v-ef4e0d9a"),n=n(),D(),n),C={class:"container mt-4"},P={class:"mb-3"},R=S(()=>s("label",{for:"imageUpload",class:"form-label"},"Upload Images",-1)),V={key:0},B={class:"row"},z={class:"card"},E=["src"],L={class:"card-body"},M={class:"card-text"},j={class:"progress"},q={__name:"ImageUpload",props:{productID:{type:Number}},setup(n){const o=_([]),p=f(),i=n,u=t=>{const a=t.target.files;for(let e=0;e<a.length;e++){const d=new FileReader;d.onload=v=>{o.value.push({file:a[e],preview:v.target.result,progress:0})},d.readAsDataURL(a[e])}},l=async()=>{for(let t=0;t<o.value.length;t++){const a=new FormData;a.append("product",i.productID),a.append("img",o.value[t].file);try{const e=await h.post("thumbs",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:d=>{o.value[t].progress=Math.round(d.loaded/d.total*100)}});console.log(e),p.push(`/product/upload/${i.productID}`)}catch(e){p.push(`/product/upload/${i.productID}`),console.error("Error uploading image:",e)}}};return(t,a)=>(r(),c("div",C,[s("div",P,[R,s("input",{type:"file",class:"form-control",id:"imageUpload",multiple:"",onChange:u},null,32)]),o.value.length>0?(r(),c("div",V,[s("div",B,[(r(!0),c(m,null,g(o.value,(e,d)=>(r(),c("div",{class:"col-md-3",key:d},[s("div",z,[s("img",{src:e.preview,class:"card-img-top",alt:"Image Preview"},null,8,E),s("div",L,[s("p",M,"Progress: "+I(e.progress)+"%",1),s("div",j,[s("div",{class:"progress-bar",style:y({width:e.progress+"%"}),role:"progressbar"},null,4)])])])]))),128))]),s("button",{class:"btn btn-primary mt-3",onClick:l},"Upload")])):w("",!0)]))}},A=N(q,[["__scopeId","data-v-ef4e0d9a"]]),T={class:"container mt-5"},Y={class:"row"},G=["src"],H={key:1,class:"col-12"},J=s("h3",null,"No Product Image Uploaded Yet!!",-1),K=[J],O={class:"row"},X={__name:"UploadImageView",setup(n){const o=U(),p=_([]),i=async u=>{try{const l=await h.get(`thumbs?product=${u}`);p.value=l.data.data,console.log(l.data.data)}catch(l){console.log(l)}};return $(async()=>await i(o.params.product)),k(async()=>await i(o.params.product)),(u,l)=>(r(),c("div",T,[s("div",Y,[p.value.length?(r(!0),c(m,{key:0},g(p.value,t=>(r(),c("div",{class:"col-lg-4 p-2",key:t.id},[s("img",{src:t.img,alt:""},null,8,G)]))),128)):(r(),c("div",H,K))]),s("div",O,[x(A,{productID:F(o).params.product},null,8,["productID"])])]))}};export{X as default};
